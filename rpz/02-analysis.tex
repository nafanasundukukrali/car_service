\chapter{Аналитическая часть}

В данном разделе будет проведен анализ предметной области автомобильных сервисов, специализирующихся на иномарках, сформулировано описание пользователей проектируемого приложения.

\section{Анализ существующих решений}

Существующие решения были проанализированы с точки зрения клиента -- человека, который желает воспользоваться услугами автосервиса. При анализе решений были выделены следующие критерии:

\begin{itemize}
	\item наличие личного кабинета, предоставляющего спектр дополнительных возможностей;
	\item возможность ознакомиться с ценами на услуги до регистрации в автосервисе.
\end{itemize}

В таблице \ref{tab:compare1} приведено сравнение существующих решений по указанным критериям.

\begin{table}[H]
	\centering
	\caption{\label{tab:compare1}Сравнение существующих решений по указанным критериям (ч. 1)}
	\begin{tabular}{|l|c|c|}
		\hline \specialcell{Автомобильный\\сервис} & \specialcell{Личный\\кабинет} &
		\specialcell{Прайс\\лист} \\\hline
		У Сервис+ \cite{serv1} & - & - \\\hline
		Рольф \cite{serv2} & + & + \\\hline
		ЕвроАвто \cite{serv3} & + & + \\\hline
		Dynamic Drive \cite{serv4} & - & - \\\hline
		АвтоРитм \cite{serv5} & + & - \\\hline
	\end{tabular}
\end{table}

Поскольку некоторые решения имели личный кабинет, то они были проанализированы по дополнительным критериям:

\begin{enumerate}
	\item возможность авторизации и регистрации;
	\item возможность самостоятельно вводить информацию о транспорте;
	\item возможность фильтра предоставляемых услуг, в зависимости от выбранного для записи транспорта;
	\item возможность просмотра предыдущих записей в автосервис;
	\item запись в автосервис на услугу. 
\end{enumerate}

В таблице \ref{tab:compare2} приведено сравнение существующих решений по дополнительным указанным критериям.

\begin{table}[H]
	\centering
	\caption{\label{tab:compare2}Сравнение существующих решений по указанным критериям (ч. 1)}
	\begin{tabular}{|l|c|c|c|c|c|c|c|}
		\hline \specialcell{Автомобильный\\сервис} & \specialcell{1} & \specialcell{2} & \specialcell{3} & \specialcell{4} & \specialcell{5}\\\hline
		Рольф \cite{serv2} & + & + & + & + & + \\\hline
		ЕвроАвто \cite{serv3} & + & + & + & + & + \\\hline
		АвтоРитм \cite{serv5} & + & - & - & - & +  \\\hline
	\end{tabular}
\end{table}

\section{Формализация задачи}

Проектируемое приложение должно будет удовлетворять всем указанным выше критериям. Однако, ни в одном из рассмотренных решений нет возможности записаться повторно на услугу, основываясь на предыдущей записи. 

Согласно источнику \cite{volgin}, одними из задач автосервиса являются:

\begin{itemize}
	\item приведение количества рабочих мест и кадровых возможностей в соответствие с фактическим наличием заказов;
	\item учет и контроль рабочего времени по организационно-экономическим ресурсам.
\end{itemize}

Разрабатываемое решение не должно идти вразрез с данными задачами. 

\subsection{Описание пользователей проектируемого приложения к базе данных}

В рамках разрабатываемого приложения были выделены следующие роли:

\begin{itemize}
	\item гость -- посетитель, желающий авторизоваться, зарегистрироваться в качестве клиента или посмотреть цены на услуги;
	\item клиент -- посетитель, желающий записаться в автосалон на определённую услугу;
	\item администратор -- валидирует поступающие записи, составляет расписание механиков. Способен менять информацию по клиентам и механикам, стоимости услуг;
	\item механик -- выполняет заказы, может оставлять комментарии по ним. Может сам создавать дополнительные записи на услуги для клиентов по результату обслуживания, которые также валидирует администратор.
\end{itemize}

На рисунке \ref{img:usecase} приведена диаграмма прецедентов.

\includeimage  
{usecase}
{f}
{H}
{0.9\textwidth}
{Диаграмма прецедентов}

\section{Формализация данных}

База данных должна хранить следующую информацию:

\begin{itemize}
	\item клиенты;
	\item автомобили клиентов;
	\item администраторы;
	\item механики;
	\item заявки на услугу;
	\item расписание механиков.
\end{itemize}

\section{Анализ баз данных}

Модель данных -- средство абстракции, позволяющее видеть обобщенную структуру данных, хранимых в базе данных, а не их конкретные значения \cite{dm}.

Существуют требования к организации данных в БД \cite{bd:2023}:
\begin{enumerate}
	\item неизбыточность данных -- каждое данное присутствует в БД в единственном экземпляре;
	\item совместное использование данных многими пользователями -- БД должна предоставлять одни и те же ресурсы данных разными её пользователям;
	\item эффективность доступа к БД. Под эффективностью доступа подразумевается величина, обратная среднему числу физических обращений, необходимых для осуществления логического доступа;
	\item целостность данных -- информации в БД должна соответствовать её внутренней логике, структуре и всем явно заданным правилам;
	\item безопасность данных -- данные в БД должны быть защищены от преднамеренного или непреднамеренного искажения или разрушения данных;
	\item восстановление данных после программных и аппаратных сбоев;
	\item независимость данных от прикладных программ.
\end{enumerate}

По модели данных БД делятся на дореляционные, реляционные и постреляционные \cite{bd:2023}.

\subsection{Дореляционные базы данных}

К дореляционным базам данных относят БД, основанные на инвертированных списках, иерархических и сетевых моделях данных.
Модель данных на основе инвертированных списков представляет собой совокупность файлов, содержащих записи (таблиц), для которых определен некоторый порядок, диктуемый физической организацией данных \cite{bd:2023}.

%\includeimage  
%{spisok}
%{f}
%{H}
%{0.9\textwidth}
%{Модель данных на основе инвертированных списков}

На данную модель данных нельзя наложить ограничения целостности \cite{bd:2023}. Ограничения целостности накладываются на приложения, имеющие доступ к БД, что является нарушением сразу двух требований к организации данных в БД.

Иерархическая модель данных состоит из объектов, которые содержат данное и указатели от родительских объектов к потомках. 
%Связи в иерархической модели данных можно продемонстрировать подобно тому, как это было сделано на рисунке \ref{img:ierarch}.

%\includeimage  
%{ierarch}
%{f}
%{H}
%{0.9\textwidth}
%{Связи в иерархической модели данных}

Между предками и потомками поддерживается контроль целостности связей \cite{dm}, поскольку потомок не может существовать без родителя, а у некоторых родителей может не быть потомков. Данную модель используют для работы с иерархической информацией \cite{dm}. 

В сетевой модели данных используются понятия узел и связь, где узел -- это совокупность атрибутов данных, описывающих некоторый объект \cite{bd:2023}. 
%На рисунке \ref{img:mods} приведена иллюстрация данной модели данных.

%\includeimage  
%{mods}
%{f}
%{H}
%{0.9\textwidth}
%{Связи в сетевой модели данных}

В такой модели логика выборки данных зависит от физической организации данных \cite{bd:2023}, таким образом происходит нарушение требования независимости данных от прикладных программ. 

\subsection{Реляционные базы данных}

Реляционная модель состоит из трех частей: структурной, целостностной и манипуляционной \cite{bd:2023}. 
Структурная часть описывает, из каких объектов состоит реляционная модель. 
Целостная часть состоит из требований целостности сущностей и ссылочной целостности.
Манипуляционная часть реляционной модели описывает два эквивалентных способа
манипулирования реляционными данными - реляционную алгебру и реляционное исчисление.
Реляционная модель оперирует понятием «Отношение» \cite{bd:2023}. 
Отношение имеет заголовок и тело. 
Заголовок – набор атрибутов (В SQL - столбцы), каждый из которых имеет определенный тип. 
Атрибут – совокупность имени и типа данных. 
Тело – множество картежей (В SQL – строки). 
Заголовок кортежа – заголовок отношения.

Согласно источнику \cite{relat}, реляционная модель данных проигрывает иерархической и сетевой моделям по информативности и скорости доступа к данным, её основное преимущество — в простоте представления структуры БД, как следствие, в высокой технологичности разработки БД, а также в эффективности выполнения модифицирующих операций. Выводы основаны на сравнении алгоритмов вставки/удаления узла графа или вершины дерева с алгоритмами вставки/удаления строки в не отсортированной таблице соответственно.

В реляционной модели поддерживается ограничение типов \cite{postrelat}. Она не предназначена для использования коллекций, структур, составных данных, поэтому фото- и видеоматериалы, их атрибуты, графические документы и т.д. невозможно хранить в такой БД.

\subsection{Постреляционные базы данных}

Постреляционные модели данных делятся на объектные, объектные-реляционные, полуструктурированные \cite{postrelat}. Объектные базы данных, основанные на объектно-ориентированной парадигме, — альтернатива реляционному подходу \cite{postrelat}. Объектно-реляционные БД поддерживают обратную совместимость с реляционными базами и расширяют их возможности \cite{postrelat}. Полуструктурированные БД развиваются параллельно на основе сетевых иерархических БД и позволяют работать с частично структурированными данными \cite{postrelat}.

\subsection{Выбор базы данных}

Проектируемая БД не имеет иерархической структуры, не содержит составных типов, и должна соответствовать требованиям организации данных в БД. Таким образом, была выбрана реляционная модель.

\section{Диаграмма сущностей и связей}

Поскольку механик может уйти в отпуск и вернуться из него необходимо, чтобы каким-то образом учитывалось, что на текущий момент механик в отпуске или нет. 
Возникает потребность в статусе строки расписании механика.
На рисунке \ref{img:dpsshedule} приведена диаграмма перехода состояния строки в расписании механика.

\includeimage  
{dpsshedule}
{f}
{H}
{0.9\textwidth}
{Диаграмма перехода состояния строки расписании механика}

Поскольку механик может уволиться, но необходимо хранить информацию о ранее связанным с ним заявках, или всё также быть в отпуске, возникает потребность в статусе аккаунта механика. 
На рисунке \ref{img:dpsapplication} приведена диаграмма перехода состояния аккаунта механика.

\includeimage  
{dpsmechanic}
{f}
{H}
{0.9\textwidth}
{Диаграмма перехода состояния аккаунта механика}

Заявка может быть в трёх состояниях: создана, и администратору необходимо назначить дату и механика, исполняется, то есть механик пока не завершил заказ, и исполнена. 
При этом, заявка может быть невалидной, если, например, механик уходит в отпуск в назначенную дату.
Возникает потребность в статусе заявки.
На рисунке \ref{img:dpsapplication} приведена диаграмма перехода состояния заявки.

\includeimage  
{dpsapplication}
{f}
{H}
{0.9\textwidth}
{Диаграмма перехода состояния заявки}

На рисунке \ref{img:er} приведена диаграмма сущностей и связей в нотации Чена.

\includeimage  
{er}
{f}
{H}
{0.9\textwidth}
{Диаграмма сущностей и связей в нотации Чена}

\section*{Вывод}

В данном разделе был проведен анализ предметной области автомобильных сервисов, специализирующихся на иномарках, сформулировано описание пользователей проектируемого приложения.

Проектируемая БД не имеет иерархической структуры, не содержит составных типов, и должна соответствовать требованиям организации данных в БД. Таким образом, была выбрана реляционная модель.



 







